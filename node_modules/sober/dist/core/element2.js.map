{
  "version": 3,
  "sources": ["element2.js"],
  "sourcesContent": ["export const supports = { CSSStyleSheet: true, CSSContainer: CSS.supports('container-type', 'size') };\ntry {\n    new CSSStyleSheet();\n}\ncatch (error) {\n    supports.CSSStyleSheet = false;\n}\nconst parseType = (value, old) => {\n    if (value === undefined)\n        return old;\n    if (typeof old === 'string')\n        return String(value);\n    if (typeof old === 'number')\n        return Number(value);\n    if (typeof old === 'boolean') {\n        if (typeof value === 'boolean')\n            return value;\n        return value === 'true' ? true : false;\n    }\n    throw new TypeError();\n};\nconst baseStyle = `:host{user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}`\nconst setStyle = (shadowRoot, css) => {\n    const all = [baseStyle, css];\n    for (const css of all) {\n        if (!css)\n            continue;\n        if (!supports.CSSStyleSheet) {\n            const el = document.createElement('style');\n            el.textContent = css;\n            shadowRoot.insertBefore(el, shadowRoot.firstChild);\n            continue;\n        }\n        const sheet = new CSSStyleSheet();\n        sheet.replaceSync(css);\n        shadowRoot.adoptedStyleSheets = [...shadowRoot.adoptedStyleSheets, sheet];\n    }\n};\nexport const useElement = (options) => {\n    const attrs = [];\n    const upperAttrs = {};\n    for (const key in options.props) {\n        const value = key.toLowerCase();\n        attrs.push(value);\n        upperAttrs[value] = key;\n    }\n    const map = new Map();\n    class Prototype extends HTMLElement {\n        static observedAttributes = attrs;\n        static define(name) {\n            customElements.define(name, this);\n        }\n        constructor() {\n            super();\n            const shadowRoot = this.attachShadow({ mode: 'open' });\n            shadowRoot.innerHTML = options.template ?? '';\n            setStyle(shadowRoot, options.style);\n            const props = { ...options.props };\n            const ahead = {};\n            for (const key in options.props) {\n                const k = key;\n                if (this[k] !== undefined) {\n                    ahead[key] = this[k];\n                }\n                this[k] = props[key];\n            }\n            const setup = options.setup?.apply(this, [shadowRoot]);\n            for (const key in options.props) {\n                Object.defineProperty(this, key, {\n                    configurable: true,\n                    get: () => {\n                        const call = setup?.[key];\n                        if (!call || typeof call === 'function' || !call.get)\n                            return props[key];\n                        return call.get?.(props[key]);\n                    },\n                    set: (v) => {\n                        const value = parseType(v, options.props[key]);\n                        if (value === this[key])\n                            return;\n                        if (options.syncProps === true || options.syncProps?.includes(key)) {\n                            const lowerKey = key.toLowerCase();\n                            const attrValue = this.getAttribute(lowerKey);\n                            const valueStr = String(value);\n                            if (value === options.props?.[key] && attrValue !== null) {\n                                this.removeAttribute(lowerKey);\n                                return;\n                            }\n                            if (value !== options.props?.[key] && attrValue !== valueStr) {\n                                this.setAttribute(lowerKey, valueStr);\n                                return;\n                            }\n                        }\n                        const old = props[key];\n                        props[key] = value;\n                        const call = setup?.[key];\n                        if (!call)\n                            return;\n                        try {\n                            typeof call === 'function' ? call(value, old) : call.set?.(value, old);\n                        }\n                        catch (error) {\n                            props[key] = old;\n                            throw error;\n                        }\n                    }\n                });\n            }\n            for (const key in setup?.expose) {\n                Object.defineProperty(this, key, { get: () => setup?.expose?.[key] });\n            }\n            for (const key in ahead) {\n                this[key] = ahead[key];\n            }\n            map.set(this, setup);\n            //@ts-ignore\n            this.connectedCallback = this.disconnectedCallback = this.adoptedCallback = this.attributeChangedCallback = undefined;\n        }\n        connectedCallback() {\n            map.get(this)?.onMounted?.();\n        }\n        disconnectedCallback() {\n            map.get(this)?.onUnmounted?.();\n        }\n        adoptedCallback() {\n            map.get(this)?.onAdopted?.();\n        }\n        attributeChangedCallback(key, _, value) {\n            this[upperAttrs[key]] = (value ?? undefined);\n        }\n    }\n    return Prototype;\n};\n"],
  "mappings": "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",
  "names": ["supports", "parseType", "value", "old", "baseStyle", "setStyle", "shadowRoot", "css", "all", "el", "sheet", "useElement", "options", "attrs", "upperAttrs", "key", "map", "Prototype", "name", "props", "ahead", "k", "setup", "call", "v", "lowerKey", "attrValue", "valueStr", "error", "_"]
}
