{
  "version": 3,
  "sources": ["select.js"],
  "sourcesContent": ["export class Select {\n    list = [];\n    select;\n    selectValue;\n    flag = false;\n    constructor(options) {\n        const { context } = options;\n        context.addEventListener(`${context.tagName.toLocaleLowerCase()}:select`, (event) => {\n            event.stopPropagation();\n            if (!(event.target instanceof options.class))\n                return;\n            let old;\n            this.flag = true;\n            event.target.selected = true;\n            this.list.forEach((item) => {\n                if (item === event.target)\n                    return;\n                if (item.selected)\n                    old = item;\n                item.selected = false;\n            });\n            this.select = event.target;\n            this.flag = false;\n            context.dispatchEvent(new Event('change'));\n            this.onUpdate?.(old);\n            this.onSelect?.();\n        });\n        context.addEventListener(`${context.tagName.toLocaleLowerCase()}:update`, (event) => {\n            event.stopPropagation();\n            if (this.flag || this.list.length === 0 || !(event.target instanceof options.class))\n                return;\n            this.flag = true;\n            let old;\n            if (!event.target.selected) {\n                delete this.select;\n            }\n            else {\n                this.select = event.target;\n                this.list.forEach((item) => {\n                    if (item === event.target)\n                        return;\n                    if (item.selected)\n                        old = item;\n                    item.selected = false;\n                });\n            }\n            this.flag = false;\n            this.onUpdate?.(old);\n        });\n        options.slot.addEventListener('slotchange', () => {\n            this.flag = true;\n            delete this.select;\n            this.list = options.slot.assignedElements().filter((item) => {\n                if (!(item instanceof options.class))\n                    return;\n                if (this.selectValue !== undefined) {\n                    if (item.value === this.selectValue) {\n                        this.select = item;\n                        item.selected = true;\n                    }\n                    else {\n                        item.selected = false;\n                    }\n                }\n                else {\n                    if (!this.select && item.selected) {\n                        this.select = item;\n                        return true;\n                    }\n                    if (this.select)\n                        item.selected = false;\n                }\n                return true;\n            });\n            this.flag = false;\n            this.onSlotChange?.();\n            this.onUpdate?.();\n        });\n    }\n    get value() {\n        return this.list[this.list.indexOf(this.select)]?.value ?? '';\n    }\n    set value(value) {\n        this.selectValue = value;\n        if (this.list.length === 0)\n            return;\n        this.flag = true;\n        this.list.forEach((item) => {\n            if (item.value === value) {\n                item.selected = true;\n                this.select = item;\n                return;\n            }\n            item.selected = false;\n        });\n        this.onUpdate?.();\n        this.flag = false;\n    }\n    get selectedIndex() {\n        return this.list.indexOf(this.select);\n    }\n}\n"],
  "mappings": "AAAO,MAAMA,CAAO,CAChB,KAAO,CAAC,EACR,OACA,YACA,KAAO,GACP,YAAYC,EAAS,CACjB,KAAM,CAAE,QAAAC,CAAQ,EAAID,EACpBC,EAAQ,iBAAiB,GAAGA,EAAQ,QAAQ,kBAAkB,CAAC,UAAYC,GAAU,CAEjF,GADAA,EAAM,gBAAgB,EAClB,EAAEA,EAAM,kBAAkBF,EAAQ,OAClC,OACJ,IAAIG,EACJ,KAAK,KAAO,GACZD,EAAM,OAAO,SAAW,GACxB,KAAK,KAAK,QAASE,GAAS,CACpBA,IAASF,EAAM,SAEfE,EAAK,WACLD,EAAMC,GACVA,EAAK,SAAW,GACpB,CAAC,EACD,KAAK,OAASF,EAAM,OACpB,KAAK,KAAO,GACZD,EAAQ,cAAc,IAAI,MAAM,QAAQ,CAAC,EACzC,KAAK,WAAWE,CAAG,EACnB,KAAK,WAAW,CACpB,CAAC,EACDF,EAAQ,iBAAiB,GAAGA,EAAQ,QAAQ,kBAAkB,CAAC,UAAYC,GAAU,CAEjF,GADAA,EAAM,gBAAgB,EAClB,KAAK,MAAQ,KAAK,KAAK,SAAW,GAAK,EAAEA,EAAM,kBAAkBF,EAAQ,OACzE,OACJ,KAAK,KAAO,GACZ,IAAIG,EACCD,EAAM,OAAO,UAId,KAAK,OAASA,EAAM,OACpB,KAAK,KAAK,QAASE,GAAS,CACpBA,IAASF,EAAM,SAEfE,EAAK,WACLD,EAAMC,GACVA,EAAK,SAAW,GACpB,CAAC,GAVD,OAAO,KAAK,OAYhB,KAAK,KAAO,GACZ,KAAK,WAAWD,CAAG,CACvB,CAAC,EACDH,EAAQ,KAAK,iBAAiB,aAAc,IAAM,CAC9C,KAAK,KAAO,GACZ,OAAO,KAAK,OACZ,KAAK,KAAOA,EAAQ,KAAK,iBAAiB,EAAE,OAAQI,GAAS,CACzD,GAAMA,aAAgBJ,EAAQ,MAE9B,IAAI,KAAK,cAAgB,OACjBI,EAAK,QAAU,KAAK,aACpB,KAAK,OAASA,EACdA,EAAK,SAAW,IAGhBA,EAAK,SAAW,OAGnB,CACD,GAAI,CAAC,KAAK,QAAUA,EAAK,SACrB,YAAK,OAASA,EACP,GAEP,KAAK,SACLA,EAAK,SAAW,GACxB,CACA,MAAO,GACX,CAAC,EACD,KAAK,KAAO,GACZ,KAAK,eAAe,EACpB,KAAK,WAAW,CACpB,CAAC,CACL,CACA,IAAI,OAAQ,CACR,OAAO,KAAK,KAAK,KAAK,KAAK,QAAQ,KAAK,MAAM,CAAC,GAAG,OAAS,EAC/D,CACA,IAAI,MAAMC,EAAO,CACb,KAAK,YAAcA,EACf,KAAK,KAAK,SAAW,IAEzB,KAAK,KAAO,GACZ,KAAK,KAAK,QAASD,GAAS,CACxB,GAAIA,EAAK,QAAUC,EAAO,CACtBD,EAAK,SAAW,GAChB,KAAK,OAASA,EACd,MACJ,CACAA,EAAK,SAAW,EACpB,CAAC,EACD,KAAK,WAAW,EAChB,KAAK,KAAO,GAChB,CACA,IAAI,eAAgB,CAChB,OAAO,KAAK,KAAK,QAAQ,KAAK,MAAM,CACxC,CACJ",
  "names": ["Select", "options", "context", "event", "old", "item", "value"]
}
