{
  "version": 3,
  "sources": ["bottom-sheet.js"],
  "sourcesContent": ["import { useElement, useEvents, useProps } from './core/element.js';\nimport { convertCSSDuration } from './core/utils/CSSUtils.js';\nconst name = 's-bottom-sheet';\nconst props = useProps({\n    showed: false,\n    disabledGesture: false\n});\nconst events = useEvents({\n    show: (CustomEvent),\n    showed: Event,\n    close: (CustomEvent),\n    closed: Event\n});\nconst style = `:host{display:inline-block;vertical-align:middle}dialog{top:0;left:0;width:100%;height:100%;background:none;border:none;padding:0;max-width:none;max-height:none;outline:none;justify-content:center;align-items:flex-end;color:inherit;overflow:hidden}dialog::backdrop{background:none}dialog[open]{display:flex}.scrim{position:absolute;inset:0;width:100%;height:100%;opacity:0;backdrop-filter:saturate(180%) blur(2px)}.scrim:before{content:\"\";display:block;width:100%;height:100%;opacity:.75;background:var(--s-color-scrim, #000000)}dialog.show .scrim{opacity:1}.container{outline:none;position:relative;border-radius:24px 24px 0 0;width:100%;max-height:calc(100% - 56px);display:flex;flex-direction:column;padding-bottom:env(safe-area-inset-bottom);max-width:425px;box-shadow:var(--s-elevation-level1, 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12));background:var(--s-color-surface-container-low, #F2F4F5)}.indicator{width:100%;display:flex;justify-content:center;align-items:center;height:18px;cursor:pointer;flex-shrink:0}.indicator:before{content:\"\";width:40px;height:4px;border-radius:2px;background:var(--s-color-outline, #70787D);opacity:.4}::slotted([slot=text]){padding:24px;line-height:22px}::slotted(:not([slot])){overscroll-behavior:none}@media (max-width: 768px){.container{max-width:768px}}`\nconst template = `<slot name=\"trigger\"></slot><dialog part=\"popup\"><div class=\"scrim\" part=\"scrim\"></div><div class=\"container\" part=\"container\"><div class=\"indicator\" part=\"indicator\"></div><slot name=\"text\"></slot><slot id=\"view\"></slot></div></dialog>`\nconst builder = (options) => {\n    let root = document.body;\n    const page = document.body.firstElementChild;\n    if (page && page.tagName === 'S-PAGE')\n        root = page;\n    const bottomSheet = new BottomSheet();\n    const text = document.createElement('div');\n    text.slot = 'text';\n    if (typeof options === 'function' || options instanceof HTMLElement) {\n        options instanceof HTMLElement ? bottomSheet.appendChild(options) : options(bottomSheet);\n    }\n    else if (typeof options === 'string') {\n        text.textContent = options;\n        bottomSheet.appendChild(text);\n    }\n    else {\n        if (options.root)\n            root = options.root;\n        if (options.disabledGesture)\n            bottomSheet.disabledGesture = options.disabledGesture;\n        if (typeof options.view === 'string') {\n            text.textContent = options.view;\n            bottomSheet.appendChild(text);\n        }\n        if (options.view instanceof HTMLElement) {\n            bottomSheet.appendChild(options.view);\n        }\n        if (typeof options.view === 'function') {\n            options.view(bottomSheet);\n        }\n    }\n    bottomSheet.addEventListener('closed', () => root.removeChild(bottomSheet));\n    bottomSheet.showed = true;\n    root.appendChild(bottomSheet);\n    return bottomSheet;\n};\nexport class BottomSheet extends useElement({\n    style, template, props, events, methods: { builder },\n    setup(shadowRoot) {\n        const dialog = shadowRoot.querySelector('dialog');\n        const container = shadowRoot.querySelector('.container');\n        const scrim = shadowRoot.querySelector('.scrim');\n        const indicator = shadowRoot.querySelector('.indicator');\n        const computedStyle = getComputedStyle(this);\n        let scrollView = null;\n        const getAnimateOptions = () => {\n            const easing = computedStyle.getPropertyValue('--s-motion-easing-standard') || \"cubic-bezier(0.2, 0, 0, 1.0)\" /* Theme.motionEasingStandard */;\n            const duration = computedStyle.getPropertyValue('--s-motion-duration-medium4') || \"400ms\" /* Theme.motionDurationMedium4 */;\n            return { easing: easing, duration: convertCSSDuration(duration) };\n        };\n        shadowRoot.querySelector('#view').onslotchange = (event) => {\n            const target = event.target;\n            scrollView = target.assignedElements()[0] ?? null;\n        };\n        shadowRoot.querySelector('slot[name=trigger]').onclick = () => {\n            if (this.showed || !this.dispatchEvent(new CustomEvent('show', { cancelable: true, detail: { source: 'TRIGGER' } })))\n                return;\n            this.showed = true;\n        };\n        const onClose = (source) => {\n            if (!this.showed || !this.dispatchEvent(new CustomEvent('close', { cancelable: true, detail: { source } })))\n                return;\n            this.showed = false;\n        };\n        scrim.onclick = () => onClose('SCRIM');\n        let touchs = null;\n        container.addEventListener('touchmove', (event) => {\n            const target = event.target;\n            if (this.disabledGesture)\n                return;\n            const touch = event.touches[0];\n            if (!touchs)\n                return touchs = { y: touch.pageY, x: touch.pageX, disabled: false, top: 0, h: container.offsetHeight, now: Date.now() };\n            if (touchs.disabled)\n                return;\n            const top = touch.pageY - touchs.y;\n            const left = touch.pageX - touchs.x;\n            touchs.top = Math.min(touchs.h, Math.max(0, top));\n            if ((target !== indicator && scrollView && scrollView.scrollTop > 0) || Math.abs(top) < Math.abs(left))\n                return touchs.disabled = true;\n            container.style.transform = `translateY(${touchs.top}px)`;\n        }, { passive: false });\n        container.ontouchend = () => {\n            if (!touchs || touchs.disabled)\n                return touchs = null;\n            const threshold = (Date.now() - touchs.now) > 300 ? (touchs.h / 3) : 20;\n            if (touchs.top > threshold) {\n                if (!this.dispatchEvent(new CustomEvent('close', { cancelable: true, detail: { source: 'GESTURE' } })))\n                    return;\n                this.showed = false;\n            }\n            else {\n                container.animate({ transform: [container.style.transform, 'translateY(0)'] }, getAnimateOptions());\n                container.style.removeProperty('transform');\n            }\n            touchs = null;\n        };\n        const show = () => {\n            if (!this.isConnected || dialog.open)\n                return;\n            dialog.showModal();\n            dialog.classList.add('show');\n            const animateOptions = getAnimateOptions();\n            scrim.animate({ opacity: [0, 1] }, animateOptions);\n            const animation = container.animate({ transform: ['translateY(100%)', 'translateY(0)'], opacity: [0, 1] }, animateOptions);\n            animation.finished.then(() => this.dispatchEvent(new Event('showed')));\n        };\n        const close = () => {\n            if (!this.isConnected || !dialog.open)\n                return;\n            dialog.classList.remove('show');\n            const animateOptions = getAnimateOptions();\n            const oldTransform = container.style.transform;\n            scrim.animate({ opacity: [1, 0] }, animateOptions);\n            const animation = container.animate({ transform: [oldTransform === '' ? 'translateY(0)' : oldTransform, 'translateY(100%)'], opacity: [1, 0] }, animateOptions);\n            animation.finished.then(() => {\n                dialog.close();\n                if (oldTransform)\n                    container.style.removeProperty('transform');\n                this.dispatchEvent(new Event('closed'));\n            });\n        };\n        return {\n            onMounted: () => this.showed && !dialog.open && show(),\n            showed: (value) => value ? show() : close()\n        };\n    }\n}) {\n}\nBottomSheet.define(name);\n"],
  "mappings": "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",
  "names": ["useElement", "useEvents", "useProps", "convertCSSDuration", "name", "props", "events", "style", "template", "builder", "options", "root", "page", "bottomSheet", "BottomSheet", "text", "shadowRoot", "dialog", "container", "scrim", "indicator", "computedStyle", "scrollView", "getAnimateOptions", "easing", "duration", "event", "onClose", "source", "touchs", "target", "touch", "top", "left", "threshold", "show", "animateOptions", "close", "oldTransform", "value"]
}
