{
  "version": 3,
  "sources": ["carousel.js"],
  "sourcesContent": ["import { useElement, useProps } from './core/element.js';\nimport { mediaQueryList } from './core/utils/mediaQuery.js';\nimport { Select } from './core/utils/select.js';\nimport './ripple.js';\nconst name = 's-carousel';\nconst props = useProps({\n    $value: '',\n    $autoplay: false,\n    $duration: 4000\n});\nconst style = `:host{display:flex;align-items:center;position:relative;overflow:hidden;border-radius:8px;cursor:pointer;aspect-ratio:2;-webkit-aspect-ratio:2}.container{display:flex;justify-content:flex-start;height:100%;min-width:100%;transition:transform var(--s-motion-duration-long4, .6s) var(--s-motion-easing-standard, cubic-bezier(.2, 0, 0, 1))}.track{position:absolute;bottom:0;left:0;width:100%;display:flex;gap:8px;align-items:center;justify-content:center;pointer-events:none;padding:12px 0}.track .indicator{width:8px;height:8px;border-radius:4px;background:#fff;opacity:.3;flex-shrink:0;cursor:pointer;pointer-events:auto;box-shadow:var(--s-elevation-level1, 0 3px 1px -2px rgba(0, 0, 0, .2), 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12))}.track .indicator.checked{opacity:1}`\nconst template = `<div class=\"container\" part=\"container\"><slot></slot></div><div class=\"track\"></div>`\nexport class Carousel extends useElement({\n    style, template, props,\n    setup(shadowRoot) {\n        const container = shadowRoot.querySelector('.container');\n        const track = shadowRoot.querySelector('.track');\n        const slot = shadowRoot.querySelector('slot');\n        const select = new Select({ context: this, class: CarouselItem, slot });\n        let timer = -1;\n        select.onUpdate = () => {\n            track.childNodes.forEach((item) => item.classList.remove('checked'));\n            container.style.transform = `translateX(${-select.selectedIndex * 100}%)`;\n            if (select.selectedIndex === -1)\n                return;\n            track.childNodes[select.selectedIndex].classList.add('checked');\n            play();\n        };\n        const play = () => {\n            if (!this.autoplay || select.list.length === 0 || !this.isConnected)\n                return;\n            stopPlay();\n            timer = setTimeout(() => {\n                let next = select.selectedIndex + 1;\n                if (next >= select.list.length)\n                    next = 0;\n                select.list[next].selected = true;\n                this.dispatchEvent(new Event('change'));\n            }, this.duration);\n        };\n        const stopPlay = () => clearInterval(timer);\n        select.onSlotChange = () => {\n            track.innerHTML = '';\n            const fragment = document.createDocumentFragment();\n            select.list.forEach((item) => {\n                const div = document.createElement('div');\n                div.className = 'indicator';\n                div.addEventListener('click', () => item.dispatchEvent(new Event(`${name}:select`, { bubbles: true })));\n                fragment.appendChild(div);\n            });\n            track.appendChild(fragment);\n        };\n        container.onpointerdown = (event) => {\n            if (select.list.length <= 1)\n                return;\n            stopPlay();\n            const pageX = event.pageX;\n            const pageY = event.pageY;\n            const width = container.offsetWidth;\n            const prev = select.list[select.selectedIndex - 1];\n            const next = select.list[select.selectedIndex + 1];\n            const state = { now: 0, left: 0, next: undefined };\n            const move = (event) => {\n                const eventInfo = event instanceof TouchEvent ? event.touches[0] : event;\n                const x = eventInfo.pageX - pageX;\n                const y = eventInfo.pageY - pageY;\n                if (event instanceof TouchEvent && Math.abs(x) < Math.abs(y) && !state.next)\n                    return up();\n                state.left = x;\n                if (state.now === 0)\n                    state.now = Date.now();\n                if (prev)\n                    state.left = Math.min(state.left, width);\n                if (next)\n                    state.left = Math.max(state.left, width * -1);\n                if ((!prev && state.left > 0) || (!next && state.left < 0)) {\n                    state.left = state.left * 0.2;\n                }\n                if ((state.left < 0 && next) || (state.left > 0 && prev)) {\n                    const scale = (Math.abs(state.left) / width) * 0.05;\n                    select.select.style.transition = 'none';\n                    select.select.style.transform = `scale(${(0.05 - scale) + 0.95})`;\n                    state.next = state.left < 0 ? next : prev;\n                    state.next.style.transition = 'none';\n                    state.next.style.transform = `scale(${scale + 0.95})`;\n                }\n                container.style.transition = 'none';\n                container.style.pointerEvents = 'none';\n                container.style.transform = `translateX(calc(${-select.selectedIndex * 100}% + ${state.left}px))`;\n                event.cancelable && event.preventDefault();\n            };\n            const up = () => {\n                document.removeEventListener(eventName.up, up);\n                document.removeEventListener(eventName.move, move);\n                container.style.removeProperty('pointer-events');\n                container.style.removeProperty('transition');\n                select.select.style.removeProperty('transition');\n                select.select.style.removeProperty('transform');\n                state.next?.style.removeProperty('transition');\n                state.next?.style.removeProperty('transform');\n                const index = select.selectedIndex;\n                const is = (index === 0 && state.left > 0) || (index === select.list.length - 1 && state.left < 0);\n                if (!is) {\n                    const threshold = (Date.now() - state.now) > 300 ? width / 2 : 20;\n                    if (Math.abs(state.left) > threshold) {\n                        state.next?.dispatchEvent(new Event(`${name}:select`, { bubbles: true }));\n                        return;\n                    }\n                }\n                container.style.transform = `translateX(${-select.selectedIndex * 100}%)`;\n                play();\n            };\n            const eventName = {\n                move: mediaQueryList.pointerCoarse.matches ? 'touchmove' : 'pointermove',\n                up: mediaQueryList.pointerCoarse.matches ? 'touchend' : 'pointerup'\n            };\n            document.addEventListener(eventName.move, move, { passive: false });\n            document.addEventListener(eventName.up, up);\n        };\n        return {\n            expose: {\n                get options() {\n                    return select.list;\n                },\n                get selectedIndex() {\n                    return select.selectedIndex;\n                },\n                togglePrevious: () => {\n                    const prev = select.list[select.selectedIndex - 1];\n                    if (!prev)\n                        return;\n                    prev.selected = true;\n                },\n                toggleNext: () => {\n                    const next = select.list[select.selectedIndex + 1];\n                    if (!next)\n                        return;\n                    next.selected = true;\n                }\n            },\n            onMounted: play,\n            onUnmounted: stopPlay,\n            value: {\n                get: () => select.value,\n                set: (value) => {\n                    select.value = value;\n                    play();\n                }\n            },\n            autoplay: play\n        };\n    }\n}) {\n}\nconst itemName = 's-carousel-item';\nconst itemProps = useProps({\n    selected: false,\n    $value: ''\n});\nconst itemStyle = `:host{user-drag:none;-webkit-user-drag:none;flex-shrink:0;width:100%;height:100%;border-radius:8px;background:var(--s-color-surface-container-high, #E7E8EA);transform:scale(.95);transition:transform var(--s-motion-duration-long4, .6s) var(--s-motion-easing-standard, cubic-bezier(.2, 0, 0, 1));background-repeat:round}:host([selected=true]){transform:scale(1)}`\nconst itemTemplate = `<slot></slot>`\nexport class CarouselItem extends useElement({\n    style: itemStyle,\n    template: itemTemplate,\n    props: itemProps,\n    setup() {\n        return {\n            selected: () => {\n                if (!(this.parentNode instanceof Carousel))\n                    return;\n                this.dispatchEvent(new Event(`${name}:update`, { bubbles: true }));\n            }\n        };\n    }\n}) {\n}\nCarousel.define(name);\nCarouselItem.define(itemName);\n"],
  "mappings": "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",
  "names": ["useElement", "useProps", "mediaQueryList", "Select", "name", "props", "style", "template", "Carousel", "shadowRoot", "container", "track", "slot", "select", "CarouselItem", "timer", "item", "play", "stopPlay", "next", "fragment", "div", "event", "pageX", "pageY", "width", "prev", "state", "move", "eventInfo", "x", "y", "up", "scale", "eventName", "index", "threshold", "value", "itemName", "itemProps", "itemStyle", "itemTemplate"]
}
